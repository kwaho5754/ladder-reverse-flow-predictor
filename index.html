<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì‚¬ë‹¤ë¦¬ ë¸”ëŸ­ ì˜ˆì¸¡</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 2em;
      background-color: #f0f0f0;
    }
    .container {
      background: #fff;
      padding: 2em;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      max-width: 1000px;
      margin: auto;
      text-align: center;
    }
    h1 {
      color: #333;
    }
    .recent-block {
      margin-top: 1em;
      font-size: 1.1em;
      color: #555;
    }
    .cards {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-around;
    }
    .card {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 1em;
      margin: 1em;
      background: #fafafa;
      flex: 1;
      min-width: 250px;
    }
    .card h3 {
      margin-bottom: 0.5em;
    }
    .divider {
      margin-top: 3em;
      font-size: 1.2em;
      font-weight: bold;
      color: #444;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ“Š ì‚¬ë‹¤ë¦¬ ì˜ˆì¸¡ ì‹œìŠ¤í…œ</h1>
    <div id="round">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
    <div class="recent-block" id="recentBlock">ìµœê·¼ ë¸”ë™: ...</div>
    <div class="cards" id="predictions"></div>

    <div class="divider">ğŸ” 180ë„ íšŒì „ ì˜ˆì¸¡ ê²°ê³¼</div>
    <div class="cards" id="reversePredictions"></div>

    <div class="divider">ğŸ”¹ ì¶”ê°€ Top3 ì˜ˆì¸¡ ê²°ê³¼</div>
    <div class="cards" id="extraPredictions"></div>
  </div>

  <script>
    fetch("/predict")
      .then(res => res.json())
      .then(data => {
        document.getElementById("round").innerText = `ì˜ˆì¸¡ íšŒì°¨: ${data["ì˜ˆì¸¡íšŒì°¨"]}`;
        const recentBlock = data["ìµœê·¼ë¸”ëŸ­"]?.join(" â†’ ") || "ì—†ìŒ";
        document.getElementById("recentBlock").innerText = `ìµœê·¼ ë¸”ë™: ${recentBlock}`;

        const container = document.getElementById("predictions");
        const reverseContainer = document.getElementById("reversePredictions");
        const extraContainer = document.getElementById("extraPredictions");
        container.innerHTML = "";
        reverseContainer.innerHTML = "";
        extraContainer.innerHTML = "";

        for (const dir in data["Top3"]) {
          const card = document.createElement("div");
          card.className = "card";
          card.innerHTML = `<h3>${dir}</h3>`;
          const list = data["Top3"][dir].map(item => `${item.value} (${item.count})`).join("<br>") || "âŒ ì—†ìŒ";
          card.innerHTML += `<div>${list}</div>`;

          if (dir.includes("180ë„")) {
            reverseContainer.appendChild(card);
          } else if (dir.includes("í•©ì‚°") || dir.includes("Top3")) {
            extraContainer.appendChild(card);
          } else {
            container.appendChild(card);
          }
        }
      })
      .catch(err => {
        document.getElementById("recentBlock").innerText = "âŒ ë¸”ë™ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.";
      });
  </script>
</body>
</html>
